---
author: lunar
date: Mon 03 Aug 2020 04:49:23 PM CST
tag: 求最优解
---

### **遗传算法（Genetic Algorithm）**

遗传算法基于达尔文的进化论，模拟了自然选择，物竞天择、适者生存，通过N代的遗传、变异、交叉、复制，进化出问题的最优解。

看到一个形象的比喻用来描述遗传算法：有很多袋鼠，它们降落到喜玛拉雅山脉的任意地方。这些袋鼠并不知道它们的任务是寻找珠穆朗玛峰。但每过几年，就在一些海拔高度较低的地方射杀一些袋鼠。于是，不断有袋鼠死于海拔较低的地方，而越是在海拔高的袋鼠越是能活得更久，也越有机会生儿育女。就这样经过许多年，这些袋鼠们竟然都不自觉地聚拢到了一个个的山峰上，可是在所有的袋鼠中，只有聚拢到珠穆朗玛峰的袋鼠被带回了美丽的澳洲。

由这个例子我们可以得出遗传算法的一般步骤：

1. 随机产生种群
2. 根据策略判断个体的适应度，是否符合优化准则，若符合，输出最佳个体及其最优解，结束。否则进行下一步
3. 依据适应度选择父母，适应度高的个体被选中的概率高，适应度低的个体被淘汰
4. 用父母的染色体进行交叉产生后代
5. 对子代染色体进行变异

#### 概念

1. **基因和染色体**

   一个问题的可行解被称为一条染色体

   一个可行解通常由多个元素组成，每个元素被称为染色体上的一个基因

   对于袋鼠的例子，染色体就可以看成袋鼠的坐标，基因就可以看成一个轴上的值

2. **适应度函数**

   适应度函数对每个染色体进行打分，得出每个染色体的适应度

   对于袋鼠的例子，适应度函数就是根据袋鼠的坐标计算袋鼠的海拔，然后根据海拔进行打分

3. **交叉**

   交叉需要从上一代寻找两条染色体，然后将这两条染色体从某个位置切断拼接在一起

   父母染色体的选择并不是随机的，而是通过轮盘赌算法完成的。在每一次完成进化后，都需要计算染色体的适应度。

   于是可以根据染色体的适应度来计算染色体被选择的概率，适应度越高的染色体更容易被选择，适应度低的个体就随之被淘汰了。

   计算公式如下：
   $$
   P(i) = \frac{A(i)}{Sum}
   $$
   染色体i被选择的概率等于其适应度与所有染色体适应度之和的比。

4. **变异**

   交叉注定还是只在有限的几条优秀基因中做选择，只能达到局部最优解。所以在我们通过交叉得到新的染色体之后，需要在新染色体上随机选择若干个基因，然后随机修改基因的值。从而给现有的基因引入了新的基因。

5. **复制**

   并不是所有的染色体都要走交叉->复制这条路，上一代最优秀的几条染色体应该被完好的保留下来。所以直接进行染色体的复制。

#### 迭代次数的选取

实际应用往往需要在结果精确度和执行效率中选择一个平衡点。

**限定允许范围**

事先设定一个期望的结果范围，当最终结果处在该范围内时，就可以停止迭代了。

#### 利用遗传算法解决负载均衡调度问题

> 假设有N个任务，需要负载均衡器分配给M个服务器节点去处理。每个任务的任务长度、每台服务器节点(下面简称“节点”)的处理速度已知，请给出一种任务分配方式，使得所有任务的总处理时间最短。



1. 节点处理矩阵

   所有的服务器节点用一个数组表示，数组索引即为服务器节点编号，相应的值即为服务器节点的处理速度

2. 任务矩阵

   也用一个数组表示，值表示任务量

3. 任务时间处理矩阵timeMatrix

   这是一个二维数组，timeMatrix\[i\]\[j\]表示将任务i分配給节点j处理所需要的时间。

4. 染色体Chromsome

   一维数组，Chromsome[i] = j表示任务i分配給了节点j

5. 适应度adaptability

   adaptability[i] = j表示染色体i的适应度为j

   在本实例中，我们将N个任务的执行总时间长度作为评判依据，时长越长，适应度越差。

   

