### **MySQL建表规范**

> 好的建表规范不但更利于数据管理，有时对数据库的性能更是有至关重要的影响。

1. 创建表的时候必须指定主键，并且主键建立后最好不要再有数据修改的需求。

   mysql从5.5版本开始默认使用innodb引擎，innodb表是聚簇索引表，也就是说数据通过主键聚集（ 主键下存储该行的数据，索引指向主键值），如下图所示：

   正是由于这种解构，如果后续对主键对应的值进行修改，就会导致索引节点的频繁分裂，性能会下降非常厉害。因此推荐开发的同事们使用和业务没有任何关联的自增id来做主键（切记不要使用uuid来做主键），此外也可以考虑使用其他的方式来生产自增的ID，比如使用Twitter的snowflake算法或者zk的DistributedAtomicLong来间接实现。使用自增主键而不是uuid做主键的优点主要有如下几点：

   a、占用的数据量更小

   b、数据顺序递增，不会导致索引节点的频繁分裂

   c、数字类型比字符类型效率更高

   正确招式：使用自增id作为主键

2. 创建表选择字段的时候，在符合业务需求的情况下尽量小，数据类型尽量简单

3. 除非十分确定默认引擎，否则尽量显式地声明存储引擎。字符集也是。

4. 创建表的时候对经常要查询的列添加索引或者组合索引

   索引会直接影响查询性能，尤其是数据量大的时候。

5. 创建表的时候对字段和表添加注释

6. 创建表的时候不要drop操作

   很多人喜欢在创建表前添加一句`DROP TABLE IF EXISTS TABLE`，这样有可能会将正在使用的表drop掉导致故障。

   正确的做法是：`CREATE TABLE IF NOT EXISETS TABLE;`

7. 创建表时，尽量为字段设置默认值，而不是NULL

   原因：

   1. NULL需要占用额外的空间存储；
   2. 进行比较的时候会更复杂，还会导致select不准确；
   3. 含有NULL值的列，会对SQL优化产生影响，尤其是组合索引。

8. 对于表名和字段名都尽量使用反引号``包括

   防止与SQL关键字重合。

9. 范式

   1. 第一范式

      字段都是单一属性的，不可再分。

   2. 第二范式

      要求每个记录都可以被唯一地识别，一般就是设置主键

   3. 第三范式

      要求一个数据表不包含已在其它表中已包含的非主关键字信息。否则会造成大量的信息冗余。

